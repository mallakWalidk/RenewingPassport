<app-sidebar></app-sidebar>

<div class="page-size">


    <div class="pcoded-inner-content">
      <!-- Main-body start -->
      <div class="main-body">

        <!-- Page-body start -->
        <div class="page-body">
          <div class="card">
            <div class="card-header">
              <h5>Renewed Request</h5>
            </div>

            <div class="card-block table-border-style">
              <div class="table-responsive">

                <table datatable [dtTrigger]="this.dtTrigger" class="table table-hover " width="100%">
                  <thead>
                    <tr>
                      <th scope="col">Image</th>
                    
                      <th scope="col">UserName</th>
                      <th scope="col">National Number</th>
                     
                      <th scope="col">Gender</th>
                     
                      <th scope="col">Birthdate</th>
                     <th>Status</th>
                    
                     
                     
                     
                      <th scope="col"> </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let obj of this.Data" >
                      <td>
                      <img class="rounded-circle " src="../../../assets/images/{{obj.userImagePath}}"  width="70px"></td>
                      <td>{{obj.userName}}</td>
                      <td>{{obj.nationalNumber}}</td>
                      <td>{{obj.gender}}</td>
                      <td>{{obj.userBD|date}}</td>
                      <td>{{obj.status}}</td>
                     
                   
                      
                    
                      <td> 
                        <button class="btn btn-inverse waves-effect waves-light"
                          (click)="goToProfile(obj)" >Details</button>
                        <button class="btn btn-primary waves-effect waves-light"
                          (click)="OpenRequest(obj,'Approved')" [disabled]="obj.status!='Pending'">Accept</button>
                        <button class="btn btn-outline-danger waves-effect waves-light"
                          (click)="OpenRequest(obj,'Rejected')" [disabled]="obj.status!='Pending'">Reject</button>
                        <button class="btn btn-danger   waves-effect waves-light " (click)="OpenDelete(obj.passId)"><i
                            class="fa fa-trash"></i></button>

                      </td>

                    </tr>
                  </tbody>
                </table>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

     
  <ng-template #RejectRequest>

    <h2>Are You Sure you want to Reject this Request?</h2>
    <div class="form-group">
      <label >Write the reason</label>
      <textarea class="form-control mb-2"  rows="3" [(ngModel)]="reason"></textarea>
    </div>

    <div class="col-md-12 text-center">
      <button class="btn btn-primary btn-edit" mat-dialog-close="yes">Reject</button>
      <button class="btn btn-secondary   " mat-dialog-close="no" >Cancel</button>
      </div>
      </ng-template>

    <ng-template #ApproveRequest>

      <h2>Are You Sure you want to Approve this Request?</h2>
      <div class="col-md-12 text-center">
        <button class="btn btn-primary btn-edit" mat-dialog-close="yes">Approve</button>
        <button class="btn btn-secondary   " mat-dialog-close="no" >Cancel</button>
        </div>
          </ng-template>

    <ng-template #DeleteRequests>

      <h2>Are You Sure you want to delete this item?</h2>
  <button mat-dialog-close="yes" class="btn btn-danger waves-effect waves-light">Yes</button>
  <button mat-dialog-close="no" class="btn btn-primary waves-effect waves-light">No</button>
    </ng-template>
        <ng-template #DetailsRequests>
          <h4>Request</h4>
          
            
              <div class="card">
                <div class="card-header">
                  <h5 class="card-header-text">Deatails</h5>
                  </div>
                  <div class="card-block row">
                   
                    
                    <div class="col-md-4"> 
                      <img src="../../../assets/images/{{selectedRequest.userImagePath}}" class="col-md-12">
                    </div>
                   <div class="col-md-8">
                    <div class="row">
                    
                      <div class="col-6 mb-3"><strong>Full Name :</strong> {{selectedRequest.fullName}}</div>
                    <div class="col-6 mb-3"> <strong>UserName :</strong> {{selectedRequest.userName}}</div>
                    <div class="col-6 mb-3"><strong>National Number :</strong> {{selectedRequest.nationalNumber}}</div>
                    <div class="col-6 mb-3"> <strong>gender :</strong> {{selectedRequest.gender}}</div>
                    <div class="col-6 mb-3"><strong>motherName :</strong> {{selectedRequest.motherName}}</div>
                    <div class="col-6 mb-3"> <strong>placeOfBirth :</strong> {{selectedRequest.placeOfBirth}}</div>
                    <div class="col-6 mb-3"> <strong>Birth Date :</strong> {{selectedRequest.userBD|date}}</div>
                    <div class="col-6 mb-3"><strong>Address :</strong> {{selectedRequest.athority}}</div>
                    <div class="col-6 mb-3"> <strong>Date Of Request :</strong> {{selectedRequest.dateOfIssue|date}}</div>
                    <div class="col-6 mb-3"> <strong>Date Of Response :</strong> {{selectedRequest.dateOfExpiry|date}}</div>
                    <div class="col-12 mb-3"><strong>Status :</strong> {{selectedRequest.status}}</div>
                    <div class="col-6 mb-3"> <strong>Old Passport Path :</strong><img src="../../../assets/images/{{selectedRequest.oldPassportPath}}" width="70">  </div>
                    <div class="col-md-6 mb-3"> <strong>Identity Path :</strong><img src="../../../assets/images/{{selectedRequest.identityPath}}" width="70">  </div>
                  
                  </div>
                  <button class="btn btn-primary waves-effect waves-light"
                  (click)="OpenRequest(selectedRequest,'Approved')" [disabled]="selectedRequest.status!='Pending'">Accept</button>
                <button class="btn btn-outline-danger waves-effect waves-light"
                  (click)="OpenRequest(selectedRequest,'Rejected')" [disabled]="selectedRequest.status!='Pending'">Reject</button>
                <button class="btn btn-danger   waves-effect waves-light " (click)="OpenDelete(selectedRequest.passId)"><i
                    class="fa fa-trash"></i></button>
                   </div>
                   
                  </div>
                </div>
              
           
       
        
        
        
        </ng-template>