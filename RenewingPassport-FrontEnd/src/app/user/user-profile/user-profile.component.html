<app-header></app-header>
<div class="page-content page-container back-colour" id="page-content">
  <div class="padding">
    <div class="row container d-flex justify-content-center">
      <div class="col-xl-8 col-md-12" style="margin-top: 100px; margin-left: 120px;">
        <div class="card user-card-full">
          <div class="row m-l-0 m-r-0">
            <div class="col-sm-4 bg-c-lite-green user-profile">
              <div class="card-block text-center text-white">
                <div class="m-b-25">
                  <img src="../../../assets/images/{{this.admin.user[0].userImagePath}}" class="img-radius"
                    alt="User-Profile-Image" width="100%" height="50%" />
                    
                </div>
                <div class="row">
               
              </div>
              </div>
            </div>
            <div class="col-sm-8">
              <div class="card-block">
                <h6 class="m-b-20 p-b-5 b-b-default f-w-600">Information</h6>
                <div class="row">
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">Username</p>
                    <h6 class="text-muted f-w-400">
                      {{ this.admin.user[0].userName }}
                    </h6>
                  </div>
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">Email</p>
                    <h6 class="text-muted f-w-400">
                      {{ this.admin.user[0].user_Email }}
                    </h6>
                  </div>
                </div>

                <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600"></h6>
                <div class="row">
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">Full Name</p>
                    <h6 class="text-muted f-w-400">
                      {{ this.admin.user[0].fullName }}
                    </h6>
                  </div>
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">Phone</p>
                    <h6 class="text-muted f-w-400">
                      {{ this.admin.user[0].phoneNumber }}
                    </h6>
                  </div>
                </div>

                <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600"></h6>
                <div class="row">
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">gender</p>
                    <h6 class="text-muted f-w-400">
                      {{ this.admin.user[0].gender }}
                    </h6>
                  </div>
                  <div class="col-sm-6">
                    <p class="m-b-10 f-w-600">userBD</p>
                    <h6 class="text-muted f-w-400">
                      {{ this.admin.user[0].userBD | date }}
                    </h6>
                  </div>
                  <button class=" btn btn-primary waves-effect waves-light mt-2 mr-2 col-5" (click)="UpdateProfileDailog(this.admin.user[0])">
                    Update Profile
                  </button>
                  <div class="col-2 mt-2 "></div>
                  <button class="btn btn-primary waves-effect waves-light mt-2  col-5" (click)="UpdatePasswordDailog(this.admin.user[0].userId)">
                    Change Password
                  </button>
                </div>
              </div>
            </div>
          
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>

<ng-template #CallUpdateProfileDailog>
  <h2 mat-dialog-title>Edit Profile</h2>
  <mat-dialog-content class="mat-typography">  
  <form [formGroup]="UpdateUserForm"  class="example-form" >
    <div class="row">

      <div class="col-md-12">
        <mat-form-field class="example-full-width btn-edit " appearance="outline">
          <mat-label>username</mat-label>
          <input type="text" matInput formControlName="userName" [(ngModel)]="p_data.userName"
            (ngModelChange)="CheckUsername($event)" />
          <mat-error *ngIf="UpdateUserForm.controls['userName'].hasError('required')">
            username is <strong>required</strong>
          </mat-error>
          <span Style="color: red;">
            {{usernameError}}
          </span>
        </mat-form-field>
     
        <mat-form-field class="example-full-width btn-edit " appearance="outline">
          <mat-label>Email</mat-label>
          <input type="text"  matInput formControlName="user_Email" [(ngModel)]="p_data.user_Email"
            (ngModelChange)="CheckEmail($event)" />
          <mat-error *ngIf="UpdateUserForm.controls['user_Email'].hasError('required')">
            Email is <strong>required</strong>
          </mat-error>
          <mat-error *ngIf="UpdateUserForm.controls['user_Email'].hasError('email')">
            Email exampel@gmail.com
          </mat-error>
          <span Style="color: red;">
            {{emailError}}
          </span>
        </mat-form-field>
      
        <mat-form-field class="example-full-width btn-edit " appearance="outline">
          <mat-label>fullName</mat-label>
          <input type="text"  matInput formControlName="fullName" [(ngModel)]="p_data.fullName" />
          <mat-error *ngIf="UpdateUserForm.controls['fullName'].hasError('required')">
            fullName is <strong>required</strong>
          </mat-error>
        </mat-form-field>
        </div>
        <div class="col-md-12">
        <mat-form-field class="example-full-width btn-edit " appearance="outline">
          <mat-label>phoneNumber</mat-label>
          <input type="text" class="col-md-12" matInput formControlName="phoneNumber" maxlength="14" [(ngModel)]="p_data.phoneNumber" />
        </mat-form-field>
     
        <mat-form-field class="example-full-width btn-edit " appearance="outline">
          <mat-label>gender</mat-label>
          <br />
          <mat-select formControlName="gender" matInput [(ngModel)]="p_data.gender">
            <mat-option disabled selected value="{{ p_data.gender }}">{{p_data.gender}}</mat-option>
            <mat-option value="Male">Male</mat-option>
            <mat-option value="Female">Female</mat-option>
          </mat-select>
          <mat-error *ngIf="UpdateUserForm.controls['gender'].hasError('required')">
            gender is <strong>required</strong>
        </mat-error>
        </mat-form-field>
     
        <mat-form-field class="example-full-width btn-edit " appearance="outline">
          <mat-label>userBD</mat-label>
          <input type="date" matInput formControlName="userBD" [(ngModel)]="p_data.userBD" />
        </mat-form-field>
      </div>
      <div class=" border rounded p-2 col-7 text-center">
        <p class="fw-bold ">user Image</p>
        <br/>
        <img src="../../../assets/images/{{p_data.userImagePath}}" width="100px" class="pb-4">
        <input type="file" class="form-control" #file (change)="uploadImage(file.files, 'userImagePath')" />
      </div>
    </div>
  </form>
  </mat-dialog-content>
  <mat-dialog-actions align="end" class="text-center">
    <div class="col-md-12 text-center">
      <button class="btn btn-primary btn-edit" [mat-dialog-close]="true" 
      [disabled]="!UpdateUserForm.valid || checkEmail ||checkUsername"(click)="UpdateProfile()">Save</button>
    <button class="btn btn-secondary  " mat-dialog-close >Cancel</button>
</div>
  </mat-dialog-actions>
</ng-template>


<ng-template #CallUpdatePasswordDailog>
  <h2 mat-dialog-title>Change Password</h2>
  <mat-dialog-content class="mat-typography">
    <form [formGroup]="UpdatePasswordForm" class="example-form">

      <div class="row">
        <div class="col-md-12 p-4">
          <mat-form-field class="example-full-width btn-edit " appearance="outline">
            <mat-label>old Password</mat-label>
            <input type="password" matInput formControlName="oldPassword" />
            <mat-error *ngIf="UpdatePasswordForm.controls['oldPassword'].hasError('required')">
              old Password is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
     

     
        <div class="col-md-6 p-4">
          <mat-form-field class="example-full-width btn-edit  pb-4" appearance="outline">
            <mat-label>New Password</mat-label>
            <input type="password" matInput formControlName="newPassword" />
            <mat-error *ngIf="UpdatePasswordForm.controls['newPassword'].hasError('required')">
              new Password is <strong>required</strong>
            </mat-error>
            <mat-error *ngIf="UpdatePasswordForm.controls['newPassword'].hasError('minlength')">
              Minimum eight characters
            </mat-error>
            <mat-error *ngIf="UpdatePasswordForm.controls['newPassword'].hasError('pattern')">
              at least one uppercase letter, one lowercase letter, one number and one special character
              <br>
              <br>
            </mat-error>
          </mat-form-field>
        </div>
    
        <div class="col-md-6 p-4">
          <mat-form-field class="example-full-width btn-edit " appearance="outline">
            <mat-label>Confirmed Password</mat-label>
            <input type="password" matInput formControlName="newPasswordRepeated" (change)="CheckPassword()" />
            <mat-error *ngIf="UpdatePasswordForm.controls['newPasswordRepeated'].hasError('required')">
              Confirmed Password is <strong>required</strong>
            </mat-error>
            <mat-error *ngIf="UpdatePasswordForm.controls['newPasswordRepeated'].hasError('mismatch')">
              Confirmed password must match new password
            </mat-error>
          </mat-form-field>
        </div>
      </div>

    </form>
  </mat-dialog-content>
  <mat-dialog-actions align="end" class="text-center m-t-40">
    <div class="col-md-12 text-center">
      <button class="btn btn-primary btn-edit" [mat-dialog-close]="true" [disabled]="!UpdatePasswordForm.valid"
        (click)="UpdatePassword()">Save</button>
      <button class="btn btn-secondary  " mat-dialog-close>Cancel</button>
    </div>
  </mat-dialog-actions>
</ng-template>